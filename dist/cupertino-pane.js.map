{"version":3,"file":"cupertino-pane.js.map","sources":["../src/cupertino-pane.ts"],"sourcesContent":["export class CupertinoPane {\n\n  private settings: any = {\n    initialShow: false,\n    initialBreak: 'middle',\n    backdrop: false,\n    backdropClose: false,\n    animationType: 'ease',\n    animationDuration: 300,\n    darkMode: false,\n    bottomClose: false,\n    freeMode: false,\n    buttonClose: true,\n    topperOverflow: true,\n    topperOverflowOffset: 0,\n    showDraggable: true,\n    clickBottomOpen: true,\n    breaks: {\n      top: { enabled: true, offset: 0},\n      middle: { enabled: true, offset: 0},\n      bottom: { enabled: true, offset: 0},\n    },\n    onDidDismiss: () => {},\n    onWillDismiss: () => {},\n    onDidPresent: () => {},\n    onWillPresent: () => {},\n    onDragStart: () => {},\n    onDrag: () => {}\n  };\n\n  private screen_height: number = window.screen.height;\n  private steps: any[] = [];\n  private startP: any;\n  private topper: number;\n  private bottomer: number;\n  private currentBreak: number;\n\n  private breaks: {} = {\n    top: 50,\n    middle: Math.round(this.screen_height - (this.screen_height * 0.35)),\n    bottom: this.screen_height - 80\n  };\n  private brs: number[] = [];\n\n  private parentEl: HTMLElement;\n  private wrapperEl: HTMLDivElement;\n  private paneEl: HTMLDivElement;\n  private draggableEl: HTMLDivElement;\n  private moveEl: HTMLDivElement;\n  private headerEl: HTMLHeadingElement;\n  private contentEl: HTMLHeadingElement;\n  private backdropEl: HTMLDivElement;\n  private closeEl: HTMLDivElement;\n\n  constructor(private el, conf: any = {}) {\n    this.settings = {...this.settings, ...conf};\n    this.el = <HTMLDivElement>document.querySelector(this.el);\n\n    if (this.settings.parentElement) {\n      this.settings.parentElement = <HTMLElement>document.querySelector(\n        this.settings.parentElement\n      );\n    } else {\n      this.settings.parentElement = this.el.parentElement;\n    }\n\n    ['top', 'middle', 'bottom'].forEach((val) => {\n      // If initial break disabled - set first enabled\n      if (!this.settings.breaks[this.settings.initialBreak].enabled) {\n        if (this.settings.breaks[val].enabled) {\n          this.settings.initialBreak = val;\n        }\n      }\n\n      // Add offsets\n      if (this.settings.breaks[val]\n          && this.settings.breaks[val].enabled\n          && this.settings.breaks[val].offset) {\n        this.breaks[val] -= this.settings.breaks[val].offset;\n      }\n    });\n    this.currentBreak = this.breaks[this.settings.initialBreak];\n\n    if (this.settings.initialShow) {\n      this.present();\n    }\n  }\n\n  private drawElements() {\n      this.el.style.display = 'none';\n      this.parentEl = this.settings.parentElement;\n\n      // Wrapper\n      this.wrapperEl = document.createElement('div');\n      this.wrapperEl.className = `cupertino-pane-wrapper ${this.el.className}`;\n      this.wrapperEl.style.position = 'absolute';\n      this.wrapperEl.style.top = '0';\n\n      // Panel\n      this.paneEl = document.createElement('div');\n      this.paneEl.className = 'pane';\n      this.paneEl.style.position = 'fixed';\n      this.paneEl.style.zIndex = '11';\n      this.paneEl.style.width = '100%';\n      this.paneEl.style.height = '100%';\n      this.paneEl.style.background = '#ffffff';\n      this.paneEl.style.borderTopLeftRadius = '20px';\n      this.paneEl.style.borderTopRightRadius = '20px';\n      this.paneEl.style.boxShadow = '0 4px 16px rgba(0,0,0,.12)';\n      this.paneEl.style.overflow = 'hidden';\n      this.paneEl.style.transform = `translateY(${\n        this.settings.initialShow ?\n        this.breaks[this.settings.initialBreak] : this.screen_height}px)`;\n\n      // Draggable\n      this.draggableEl = document.createElement('div');\n      this.draggableEl.className = 'draggable';\n      this.draggableEl.style.padding = '5px';\n\n      // Move\n      this.moveEl = document.createElement('div');\n      this.moveEl.className = 'move';\n      this.moveEl.style.margin = '0 auto';\n      this.moveEl.style.height = '5px';\n      this.moveEl.style.background = '#c0c0c0';\n      this.moveEl.style.width = '36px';\n      this.moveEl.style.borderRadius = '4px';\n\n      // Header\n      this.headerEl = this.el.childNodes[0];\n\n      // Content\n      this.contentEl = this.el.childNodes[1];\n      this.contentEl.style.transition = `opacity ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n      this.contentEl.style.overflowX = 'hidden';\n      this.contentEl.style.height = `${this.screen_height\n        - this.breaks['top'] - 51\n        - this.settings.topperOverflowOffset}px`;\n\n      // Backdrop\n      this.backdropEl = document.createElement('div');\n      this.backdropEl.className = 'backdrop';\n      this.backdropEl.style.overflow = 'hidden';\n      this.backdropEl.style.position = 'fixed';\n      this.backdropEl.style.width = '100%';\n      this.backdropEl.style.bottom = '0';\n      this.backdropEl.style.right = '0';\n      this.backdropEl.style.left = '0';\n      this.backdropEl.style.top = '0';\n      this.backdropEl.style.backgroundColor = 'rgba(0,0,0,.4)';\n      this.backdropEl.style.zIndex = '10';\n\n      // Close button\n      this.closeEl = document.createElement('div');\n      this.closeEl.className = 'close-button';\n      this.closeEl.style.width = '26px';\n      this.closeEl.style.height = '26px';\n      this.closeEl.style.position = 'absolute';\n      this.closeEl.style.background = '#ebebeb';\n      this.closeEl.style.top = '16px';\n      this.closeEl.style.right = '20px';\n      this.closeEl.style.borderRadius = '100%';\n  }\n\n  present() {\n\n      if (document.querySelector(\n        `.cupertino-pane-wrapper.${this.el.className.split(' ').join('.')}`)\n      ) {\n        this.moveToBreak(this.settings.initialBreak);\n        return;\n      }\n\n      // Emit event\n      this.settings.onWillPresent();\n\n      this.drawElements();\n      this.parentEl.appendChild(this.wrapperEl);\n      this.wrapperEl.appendChild(this.paneEl);\n      this.paneEl.appendChild(this.draggableEl);\n      this.paneEl.appendChild(this.headerEl);\n      this.paneEl.appendChild(this.contentEl);\n      this.draggableEl.appendChild(this.moveEl);\n\n      if (!this.settings.initialShow) {\n        this.paneEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n        setTimeout(() => {\n          this.paneEl.style.transform = `translateY(${this.breaks[this.settings.initialBreak]}px)`;\n        }, 50);\n\n        let initTransitionEv = this.paneEl.addEventListener('transitionend', (t) => {\n          this.paneEl.style.transition = `initial`;\n          initTransitionEv = undefined;\n        });\n      }\n\n      // Emit event\n      this.settings.onDidPresent();\n\n      if (this.settings.backdrop) {\n        this.wrapperEl.appendChild(this.backdropEl);\n        if (this.settings.backdropClose) {\n          this.backdropEl.addEventListener('click', (t) => this.closePane(this.backdropEl));\n        }\n      }\n\n      if (!this.settings.showDraggable) {\n        this.draggableEl.style.opacity = '0';\n      }\n\n      if (this.settings.darkMode) {\n        this.paneEl.style.background = '#1c1c1d';\n        this.paneEl.style.color = '#ffffff';\n        this.moveEl.style.background = '#5a5a5e';\n      }\n\n      if (this.settings.buttonClose) {\n        this.paneEl.appendChild(this.closeEl);\n        this.closeEl.addEventListener('click', (t) => this.closePane(this.backdropEl));\n        let iconColor = '#7a7a7e';\n        if (this.settings.darkMode) {\n          this.closeEl.style.background = '#424246';\n          iconColor = '#a8a7ae';\n        }\n        this.closeEl.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path fill=\"${iconColor}\" d=\"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z\"/>\n        </svg>`;\n      }\n\n      if (this.currentBreak === this.breaks['bottom']) {\n        this.contentEl.style.opacity = '0';\n      } else {\n        this.contentEl.style.opacity = '1';\n      }\n\n      if (this.settings.bottomClose) {\n        this.settings.breaks.bottom.enabled = true;\n      }\n\n      ['top', 'middle', 'bottom'].forEach((val) => {\n        if (this.settings.breaks[val].enabled) {\n          this.brs.push(this.breaks[val]);\n        }\n      });\n      \n      // Determinate topper point\n      this.topper = this.brs.reduce((prev, curr) => {\n        return (Math.abs(curr) < Math.abs(prev) ? curr : prev);\n      });\n      // Determinate bottomer point\n      this.bottomer = this.brs.reduce((prev, curr) => {\n        return (Math.abs(curr) > Math.abs(prev) ? curr : prev);\n      });\n\n      if (this.currentBreak === this.topper\n          && this.settings.topperOverflow) {\n            this.contentEl.style.overflowY = 'auto';\n        // headerEl.style.borderBottom = '1px solid #ebebeb';\n      }\n\n      /****** Events *******/\n      this.paneEl.addEventListener('touchstart', (t) => this.touchStart(t));\n      this.paneEl.addEventListener('touchmove', (t) => this.touchMove(t));\n      this.paneEl.addEventListener('touchend', (t) => this.touchEnd(t));\n  }\n\n  touchStart(t) {\n    // Event emitter\n    this.settings.onDragStart();\n    this.startP = (<any>t).touches[0].screenY;\n    this.steps.push(this.startP);\n  }\n\n  touchMove(t) {\n    this.settings.onDrag();\n\n    const translateYRegex = /\\.*translateY\\((.*)px\\)/i;\n    const p = parseFloat(translateYRegex.exec(this.paneEl.style.transform)[1]);\n    // Delta\n    const n = (<any>t).touches[0].screenY;\n    const diff = n - this.steps[this.steps.length - 1];\n    const newVal = p + diff;\n\n    // Not allow move panel with overflow scroll\n    let noScroll = false;\n    if (this.contentEl.style.overflowY === 'auto') {\n      t.composedPath().forEach((item) => {\n        if (item['className'] && item['className'].includes('cupertino-content')) {\n          noScroll = true;\n        }\n      });\n      if (noScroll && this.contentEl.scrollTop > 20) { return; }\n      if ((p + diff) <= this.topper && noScroll) { return; }\n    }\n\n    // Not allow drag upper than topper point\n    // Not allow drag lower than bottom if free mode\n    if (((p + diff) <= this.topper - 20)\n        || (this.settings.freeMode && !this.settings.bottomClose && ((p + diff) >= this.bottomer + 20))) {\n      return;\n    }\n\n    this.paneEl.style.transform = `translateY(${newVal}px)`;\n    this.steps.push(n);    \n\n    if (newVal > this.breaks['bottom']) {\n      this.contentEl.style.opacity = '0';\n    } else {\n      this.contentEl.style.opacity = '1';\n    }\n  }\n\n  touchEnd(t) {\n    const translateYRegex = /\\.*translateY\\((.*)px\\)/i;\n    const p = parseFloat(translateYRegex.exec(this.paneEl.style.transform)[1]);\n\n    // Determinate nearest point\n    let closest = this.brs.reduce((prev, curr) => {\n      return (Math.abs(curr - p) < Math.abs(prev - p) ? curr : prev);\n    });\n\n    // Swipe - next (if differ > 10)\n    const diff =  this.steps[this.steps.length - 1] - this.steps[this.steps.length - 2];\n    const maxDiff = 4;\n    if (Math.abs(diff) >= maxDiff) {\n      closest = this.swipeNextPoint(diff, maxDiff, closest);\n    }\n\n    // Click to bottom - open middle\n    if (this.settings.clickBottomOpen) {\n      if (this.currentBreak === this.breaks['bottom'] && isNaN(diff)) {\n        closest = this.settings.breaks['middle'].enabled\n        ? this.breaks['middle'] : this.settings.breaks['top'].enabled\n        ? this.breaks['top'] : this.breaks['bottom'];\n      }\n    }\n\n    this.steps = [];\n    this.currentBreak = closest;\n\n    if (this.currentBreak === this.breaks['bottom']) {\n      this.contentEl.style.opacity = '0';\n    } else {\n      this.contentEl.style.opacity = '1';\n    }\n\n    if (this.currentBreak === this.topper\n        && this.settings.topperOverflow) {\n      this.contentEl.style.overflowY = 'auto';\n    } else {\n      this.contentEl.style.overflowY = 'hidden';\n    }\n\n    // Bottom closable\n    if (this.settings.bottomClose && closest === this.breaks['bottom']) {\n      this.closePane(this.backdropEl);\n      return;\n    }\n\n    if (!this.settings.freeMode) {\n      this.paneEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n      this.paneEl.style.transform = `translateY(${closest}px)`;\n      let initTransitionEv = this.paneEl.addEventListener('transitionend', () => {\n        this.paneEl.style.transition = `initial`;\n        initTransitionEv = undefined;\n      });\n    }\n  }\n\n  moveToBreak(val) {\n    if (this.breaks[val] === this.breaks['bottom']) {\n      this.contentEl.style.opacity = '0';\n    } else {\n      this.contentEl.style.opacity = '1';\n    }\n\n    if (this.breaks[val] === this.topper\n        && this.settings.topperOverflow) {\n      this.contentEl.style.overflowY = 'auto';\n    } else {\n      this.contentEl.style.overflowY = 'hidden';\n    }\n\n    this.paneEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n    this.paneEl.style.transform = `translateY(${this.breaks[val]}px)`;\n    let initTransitionEv = this.paneEl.addEventListener('transitionend', (t) => {\n      this.paneEl.style.transition = `initial`;\n      initTransitionEv = undefined;\n    });\n  }\n\n  hide() {\n    this.paneEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n    this.paneEl.style.transform = `translateY(${this.screen_height}px)`;\n    let initTransitionEv = this.paneEl.addEventListener('transitionend', (t) => {\n      this.paneEl.style.transition = `initial`;\n      initTransitionEv = undefined;\n    });\n  }\n\n  get isHidden() {\n    return this.paneEl.style.transform === `translateY(${this.screen_height}px)`;;\n  }\n\n  private closePane(backdropEl) {\n      // Emit event\n      this.settings.onWillDismiss();\n\n      this.paneEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n      this.paneEl.style.transform = `translateY(${this.screen_height}px)`;\n\n      backdropEl.style.transition = `transform ${this.settings.animationDuration}ms ${this.settings.animationType} 0s`;\n      backdropEl.style.backgroundColor = 'rgba(0,0,0,.0)';\n\n      // Return dynamic content\n      this.el.appendChild(this.headerEl);\n      this.el.appendChild(this.contentEl);\n      \n      // Reset vars\n      this.currentBreak = this.breaks[this.settings.initialBreak];\n\n      this.paneEl.addEventListener('transitionend', (t) => {\n        this.parentEl.removeChild(this.wrapperEl);\n\n        // Emit event\n        this.settings.onDidDismiss();\n      });\n  }\n\n  private swipeNextPoint = (diff, maxDiff, closest) => {\n      if (this.currentBreak === this.breaks['top']) {\n        if (diff > maxDiff) {\n          if (this.settings.breaks['middle'].enabled) { return this.breaks['middle']; }\n          if (this.settings.breaks['bottom'].enabled) { return this.breaks['bottom']; }\n        }\n        return this.breaks['top'];\n      }\n\n      if (this.currentBreak === this.breaks['middle']) {\n        if (diff < -maxDiff) {\n          if (this.settings.breaks['top'].enabled) { return this.breaks['top']; }\n        }\n        if (diff > maxDiff) {\n          if (this.settings.breaks['bottom'].enabled) { return this.breaks['bottom']; }\n        }\n        return this.breaks['middle'];\n      }\n\n      if (this.currentBreak === this.breaks['bottom']) {\n        if (diff < -maxDiff) {\n          if (this.settings.breaks['middle'].enabled) { return this.breaks['middle']; }\n          if (this.settings.breaks['top'].enabled) { return this.breaks['top']; }\n        }\n        return this.breaks['bottom'];\n      }\n\n      return closest;\n  }\n\n}"],"names":[],"mappings":"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"}